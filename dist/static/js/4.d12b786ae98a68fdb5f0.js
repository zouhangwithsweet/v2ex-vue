webpackJsonp([4],{"3GUi":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),r=a.n(s),i=a("Xxa5"),n=a.n(i),l=a("exGp"),c=a.n(l),d=a("qqiS"),o=a("bh5B"),v=a("gyMJ"),u={created:function(){this.fetchHeader(),this.fetchReply()},data:function(){return{detail:{},ready:!1,replyReady:!1,replyList:[],page_size:100,page:1}},computed:{timerline:function(){var e=parseInt(this.detail.created+"000",10),t=(Date.now()-e)/1e3;return t<60?Math.round(Math.max(t,1))+"秒前":t>60&&t<36e3?Math.round(t/60)+"分钟前":Math.round(t/60/60)+"小时前"}},methods:{back:function(){this.$router.go(-1)},fetchReply:function(){var e=this;return c()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.replyReady=!0,t.next=3,Object(v.b)({topic_id:e.$route.params.id,page_size:e.page_size,page:e.page});case 3:a=t.sent,e.replyList=a,e.$refs.content.scroll.refresh(),e.replyReady=!1;case 7:case"end":return t.stop()}},t,e)}))()},fetchHeader:function(){var e=this;return c()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.ready=!0,t.next=3,Object(v.c)({id:e.$route.params.id});case 3:a=t.sent,e.detail=r()({},a[0]),e.ready=!1;case 6:case"end":return t.stop()}},t,e)}))()}},filters:{normalizeTime:function(e){var t=parseInt(e+"000",10),a=new Date(t);return a.getFullYear()+"-"+((a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-")+(a.getDate()<10?"0"+a.getDate():a.getDate())}},components:{loading:d.a,scroller:o.a}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"slider"}},[a("div",{staticClass:"list-detail",on:{click:function(e){e.stopPropagation()},touch:function(e){e.stopPropagation()}}},[a("div",{staticClass:"detail-header border-1px-b"},[a("div",{staticClass:"icon-wrapper",on:{click:e.back}},[a("icon",{attrs:{name:"angle-left",scale:"1.5"}})],1)]),e._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:e.ready,expression:"ready"}]}),e._v(" "),a("scroller",{directives:[{name:"show",rawName:"v-show",value:!e.ready,expression:"!ready"}],ref:"content",staticClass:"content-wrapper"},[a("div",[a("div",{staticClass:"detail-title"},[e._v("\n                    "+e._s(e.detail.title)+"\n                ")]),e._v(" "),a("div",{staticClass:"detail-user"},[a("img",{staticClass:"user-avatar",attrs:{src:e.detail.member?e.detail.member.avatar_normal:""}}),e._v(" "),a("div",{staticClass:"user-info"},[a("div",{staticClass:"user-name"},[e._v(e._s(e.detail.member?e.detail.member.username:""))]),e._v(" "),a("div",{staticClass:"user-node"},[a("div",{staticClass:"node-name"},[e._v(e._s(e.detail.node?e.detail.node.title:""))]),e._v(" "),a("div",{staticClass:"user-divid"},[e._v("|")]),e._v(" "),a("div",{staticClass:"user-created"},[e._v(e._s(e.timerline))])])])]),e._v(" "),a("div",{staticClass:"detail-content border-1px-b",domProps:{innerHTML:e._s(e.detail.content_rendered)}}),e._v(" "),a("div",{staticClass:"detail-reply"},[a("loading",{directives:[{name:"show",rawName:"v-show",value:e.replyReady,expression:"replyReady"}]}),e._v(" "),a("ul",e._l(e.replyList,function(t,s){return a("li",{key:s,staticClass:"reply-item border-1px-b"},[a("div",{staticClass:"detail-user"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.member?t.member.avatar_large:"",expression:"item.member ? item.member.avatar_large : ''"}],staticClass:"user-avatar"}),e._v(" "),a("div",{staticClass:"user-info"},[a("div",{staticClass:"user-name"},[e._v(e._s(t.member?t.member.username:""))]),e._v(" "),a("div",{staticClass:"user-node"},[a("div",{staticClass:"node-name"},[e._v("第"+e._s(s+1)+"楼")]),e._v(" "),a("div",{staticClass:"user-divid"},[e._v("|")]),e._v(" "),a("div",{staticClass:"user-created"},[e._v(e._s(e._f("normalizeTime")(t.created)))])])])]),e._v(" "),a("div",{staticClass:"reply-content",domProps:{innerHTML:e._s(t.content_rendered)}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.thanks>0,expression:"item.thanks > 0"}],staticClass:"icon-heart"},[a("icon",{attrs:{name:"heart",scale:"0.8"}}),e._v(" "),a("span",{staticClass:"heart-count"},[e._v(e._s(t.thanks))])],1)])}))],1)])])],1)])},staticRenderFns:[]};var p=a("VU/8")(u,m,!1,function(e){a("z9QQ")},null,null);t.default=p.exports},z9QQ:function(e,t){}});
//# sourceMappingURL=4.d12b786ae98a68fdb5f0.js.map